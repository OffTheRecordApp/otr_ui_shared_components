"use strict";function fuseHighlightDirective(){return{restrict:"A",link:function(t,e,r){for(var t=t.result,s=r.fuseHighlightBind,o=r.fuseHighlightKey,n=r.fuseHighlightBestMatch,i="",c=0,u=_.chain(t).get("originalObject.matches",[]).filter(function(t){return!o||t.key===o}).map("indices").flatten().value(),h=_.chain(u).map(function(t){return 1+_.last(t)-_.first(t)}).max().value(),l=0;l<u.length;l++){var a=_.first(u[l])||0,d=1+_.last(u[l]),p=d-a;c<=a&&(i+=s.slice(c,a),i+=!n&&h/2<p||n&&p===h?'<span class="highlight">'+s.slice(a,d)+"</span>":s.slice(a,d),c=d)}i+=s.slice(c),e.html(i)}}}angular.module("otrSharedComponents",["otrSharedComponents.tpls","courtsDropdown"]),angular.module("otrSharedComponents").directive("otrFuseHighlight",fuseHighlightDirective);var ctrl=null,CourtsDropdownComponent=function(){this.bindings={onSelectCourt:"&",inputClass:"@",hasError:"<",courts:"<"},this.controller=CourtsDropdownCtrl,this.controllerAs="vm",this.templateUrl="/components/courts-dropdown/courts-dropdown.component.html"},CourtsDropdownCtrl=function(){function t(){this.inputClass="",this.hasError=!1,this.classes=this.inputClass,this.isCourtsLoading=!1}return t.prototype.$onInit=function(){ctrl=this},t.prototype.$onChanges=function(t){t.hasError&&(this.classes=this.inputClass+(this.hasError?" has-error":"")),t.courts&&this.courts&&this.initFuse(angular.copy(this.courts))},t.prototype.initFuse=function(t){try{this.fuseAllKeys=new Fuse(t,{includeMatches:!0,includeScore:!0,distance:2e3,threshold:.5,keys:["customTitle","customDescription"]})}catch(t){throw"Dependency fuse.js required"}try{this.fuseCourtCode=new Fuse(t,{includeMatches:!0,includeScore:!0,distance:10,threshold:.1,keys:["courtCode"]})}catch(t){throw"Dependency fuse.js required"}},t.prototype.findMatchingCourts=function(t){var e=_.sortBy(ctrl.fuseAllKeys.search(t),"courtId"),t=_.sortBy(ctrl.fuseCourtCode.search(t),"courtId");return _.chain(e).unionWith(t,function(t,e){var r=t.item.courtId===e.item.courtId;return r&&(e.score=_.min([t.score,e.score])),r}).sortBy("score").take(600).map(function(t){return t.item.matches=t.matches,t.item}).value()},t.$inject=[],t}();angular.module("courtsDropdown",[]).component("courtsDropdown",new CourtsDropdownComponent);